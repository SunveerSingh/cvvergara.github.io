<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pgRouting Quickstart &mdash; OSGeo-Live 11.0beta
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '11.0beta
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="OSGeo-Live 11.0beta
 Documentation" href="../../index.html" />
    <link rel="up" title="OSGeo-Live 11.0beta Inhaltsverzeichnis" href="../overview/overview.html" />
    <link rel="next" title="PostGIS Quickstart" href="postgis_quickstart.html" />
    <link rel="prev" title="OTB Quickstart" href="otb_quickstart.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>

  </head>
  <body role="document">
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <!--li><a href="../standards/standards.html">Standards</a></li-->
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="http://www.pgrouting.org"><img alt="pgRouting Logo" class="align-right" src="../../_images/logo-pgRouting.png" style="width: 128.0px; height: 124.0px;" /></a>
<a class="reference external image-reference" href="http://www.osgeo.org"><img alt="OSGeo Community Project" class="align-right" src="../../_images/OSGeo_community.png" style="width: 150.0px; height: 53.0px;" /></a>
<div class="section" id="pgrouting-quickstart">
<h1>pgRouting Quickstart<a class="headerlink" href="#pgrouting-quickstart" title="Permalink to this headline">¶</a></h1>
<p>pgRouting erweitert eine <a class="reference internal" href="../overview/postgis_overview.html"><span class="doc">PostGIS</span></a>/<a class="reference external" href="http://www.postgresql.org">PostgreSQL</a> Geo-Datenbank um Funktionen für “Kürzeste-Wege” Berechnung (Routing).</p>
<p>Diese Quickstart Anleitung beschreibt, wie pgrouting in einer PostgreSQl Datenbank aktiviert wird, wie Daten mit osm2pgrouting geladen werden und wie einfache “Kürzeste-Wege” Berechnungen mit den Testdaten von der Kommandozeile aus durchführt werden.</p>
<div class="section" id="aktivierung-von-pgrouting-in-einer-datenbank">
<h2>Aktivierung von pgRouting in einer Datenbank<a class="headerlink" href="#aktivierung-von-pgrouting-in-einer-datenbank" title="Permalink to this headline">¶</a></h2>
<p>In dieser Übung wird einen Datenbank mit Namen <cite>city_routing</cite> erzeugt und die Erweiterung pgRouting geladen.</p>
<ul>
<li><dl class="first docutils">
<dt>Öffnen Sie ein Befehlsfenster über <span class="menuselection">Anwendungen ‣ Erweiterungen ‣ Terminal</span> und rufen Sie psql auf:</dt>
<dd><p class="first last">(psql ist das Kommandozeilen Basierte Werkzeug von PostgreSQL)</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">psql</span>
</pre></div>
</div>
<p>Geben Sie die folgenden SQL Befehle ein:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">city_routing</span><span class="p">;</span>
\<span class="n">connect</span> <span class="n">city_routing</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span> <span class="n">postgis</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span> <span class="n">pgrouting</span><span class="p">;</span>
</pre></div>
</div>
<p>Wenn Sie PostgreSQL 9.6+ verwenden, können Sie die postgis Zeile weglassen und
und folgendes eingeben <code class="code docutils literal"><span class="pre">CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">pgrouting</span> <span class="pre">CASCADE;</span></code></p>
<p>Sie können die Installation über den folgenden Befehl überprüfen:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span>  <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_version</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">version</span> <span class="o">|</span>       <span class="n">tag</span>       <span class="o">|</span>  <span class="nb">hash</span>   <span class="o">|</span> <span class="n">branch</span> <span class="o">|</span> <span class="n">boost</span>
<span class="o">---------+-----------------+---------+--------+--------</span>
 <span class="mf">2.2</span><span class="o">.</span><span class="mi">2</span>   <span class="o">|</span> <span class="n">pgrouting</span><span class="o">-</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">2</span> <span class="o">|</span> <span class="mi">7141904</span> <span class="o">|</span> <span class="n">master</span> <span class="o">|</span> <span class="mf">1.59</span><span class="o">.</span><span class="mi">0</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>Die Version sollte 2.1.0 oder höher sein, um die Beispiele des Quickstarts durchzuführen.</p>
</div>
<div class="section" id="laden-von-osm-daten-mit-osm2pgrouting">
<h2>Laden von OSM Daten mit osm2pgrouting<a class="headerlink" href="#laden-von-osm-daten-mit-osm2pgrouting" title="Permalink to this headline">¶</a></h2>
<p>osm2pgorouting ist ein kommandozeilenbasiertes Werkzeug zum Laden von .osm Dateien in ein pgRouting kompatibles Format.
Im Folgenden wird gezeigt wie osm2pgrouting Version 2.1.0+ verwendet werden kann.</p>
<p>Prüfen Sie zuerst die Version von osm2pgrouting. Sie sollte 2.1 oder höher sein.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">osm2pgrouting</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>Die Ausgabe zeigt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="ow">is</span> <span class="n">osm2pgrouting</span> <span class="n">Version</span> <span class="mf">2.1</span>
</pre></div>
</div>
<p>Laden von Daten aus einer osm Datei</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">bzcat</span> <span class="n">data</span><span class="o">/</span><span class="n">osm</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span><span class="o">.</span><span class="n">bz2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span>
<span class="n">osm2pgrouting</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span> <span class="o">-</span><span class="n">h</span> <span class="n">localhost</span> <span class="o">-</span><span class="n">U</span> <span class="n">user</span> <span class="o">-</span><span class="n">d</span> <span class="n">city_routing</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5432</span> <span class="o">-</span><span class="n">W</span> <span class="n">user</span> <span class="o">--</span><span class="n">conf</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">osm2pgrouting</span><span class="o">/</span><span class="n">mapconfig_for_cars</span><span class="o">.</span><span class="n">xml</span>
<span class="n">rm</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span>
</pre></div>
</div>
<p>Die Ausgabe sollte etwas in der Art sein:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Opening</span> <span class="n">data</span> <span class="n">file</span><span class="p">:</span> <span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span>
    <span class="n">Parsing</span> <span class="n">data</span>

<span class="n">Spliting</span> <span class="n">ways</span>

<span class="n">Dropping</span> <span class="n">tables</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">table</span> <span class="s2">&quot;ways&quot;</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">,</span> <span class="n">skipping</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">table</span> <span class="s2">&quot;ways_vertices_pgr&quot;</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">,</span> <span class="n">skipping</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">table</span> <span class="s2">&quot;relations_ways&quot;</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">,</span> <span class="n">skipping</span>
<span class="n">Creating</span> <span class="n">tables</span><span class="o">...</span>
<span class="n">Creating</span> <span class="s1">&#39;ways_vertices_pgr&#39;</span><span class="p">:</span> <span class="n">OK</span>
   <span class="n">Adding</span> <span class="n">Geometry</span><span class="p">:</span> <span class="n">Creating</span> <span class="s1">&#39;ways&#39;</span><span class="p">:</span> <span class="n">OK</span>
   <span class="n">Adding</span> <span class="n">Geometry</span><span class="p">:</span> <span class="n">Creating</span> <span class="s1">&#39;relations_ways&#39;</span><span class="p">:</span> <span class="n">OK</span>
<span class="n">Creating</span> <span class="s1">&#39;osm_nodes&#39;</span><span class="p">:</span> <span class="n">OK</span>
   <span class="n">Adding</span> <span class="n">Geometry</span><span class="p">:</span> <span class="n">Creating</span> <span class="s1">&#39;osm_relations&#39;</span><span class="p">:</span> <span class="n">OK</span>
<span class="n">Creating</span> <span class="s1">&#39;osm_way_tags&#39;</span><span class="p">:</span> <span class="n">OK</span>
<span class="n">Creating</span> <span class="s1">&#39;osm_way_types&#39;</span><span class="p">:</span> <span class="n">OK</span>
<span class="n">Creating</span> <span class="s1">&#39;osm_way_classes&#39;</span><span class="p">:</span> <span class="n">OK</span>
<span class="n">Adding</span> <span class="n">auxiliary</span> <span class="n">tables</span> <span class="n">to</span> <span class="n">database</span><span class="o">...</span>
    <span class="n">Processing</span> <span class="mi">1</span> <span class="n">way</span> <span class="n">types</span><span class="p">:</span>  <span class="n">Inserted</span> <span class="mi">1</span> <span class="n">way</span> <span class="n">types</span>
    <span class="n">Processing</span> <span class="n">way</span><span class="s1">&#39;s classes:  Inserted 16 way&#39;</span><span class="n">s</span> <span class="n">classes</span>
    <span class="n">Processing</span> <span class="n">way</span><span class="s1">&#39;s relations:  Inserted: 83874way&#39;</span><span class="n">s</span> <span class="n">relations</span>
    <span class="n">Processing</span> <span class="n">way</span><span class="s1">&#39;s tags:  Inserted 10455 way&#39;</span><span class="n">s</span> <span class="n">tags</span>
    <span class="n">Processing</span> <span class="mi">10455</span> <span class="n">ways</span><span class="p">:</span>
<span class="n">Vertices</span> <span class="n">inserted</span> <span class="mi">9165</span>    <span class="n">Ways</span> <span class="n">inserted</span><span class="p">:</span> <span class="mi">10455</span>
<span class="n">Creating</span> <span class="n">topology</span><span class="o">...</span>
<span class="c1">#########################</span>
<span class="n">size</span> <span class="n">of</span> <span class="n">streets</span><span class="p">:</span> <span class="mi">4904</span>
<span class="n">size</span> <span class="n">of</span> <span class="n">splitted</span> <span class="n">ways</span> <span class="p">:</span> <span class="mi">10455</span>
<span class="n">Execution</span> <span class="n">started</span> <span class="n">at</span><span class="p">:</span> <span class="n">Tue</span> <span class="n">Jun</span> <span class="mi">21</span> <span class="mi">17</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">57</span> <span class="mi">2016</span>
<span class="n">Execution</span> <span class="n">ended</span> <span class="n">at</span><span class="p">:</span>   <span class="n">Tue</span> <span class="n">Jun</span> <span class="mi">21</span> <span class="mi">17</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">02</span> <span class="mi">2016</span>
<span class="n">Elapsed</span> <span class="n">time</span><span class="p">:</span> <span class="mf">5.084</span> <span class="n">Seconds</span><span class="o">.</span>
<span class="n">User</span> <span class="n">CPU</span> <span class="n">time</span><span class="p">:</span> <span class="o">-&gt;</span> <span class="mf">5.084</span> <span class="n">seconds</span>
<span class="c1">#########################</span>
</pre></div>
</div>
</div>
<div class="section" id="pgrouting-in-aktion">
<h2>pgRouting in Aktion<a class="headerlink" href="#pgrouting-in-aktion" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Starte ein <span class="menuselection">Applications ‣ Accessories ‣ Terminal</span> Fenster und stelle eine Verbindung mit der <code class="docutils literal"><span class="pre">city_routing</span></code> Datenbank her:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="n">city_routing</span>
</pre></div>
</div>
<ul class="simple">
<li>Über den Befehl <strong class="command">\d</strong>, werden alle vorhandenen Tabellen aufgelistet:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>                    <span class="n">List</span> <span class="n">of</span> <span class="n">relations</span>
 <span class="n">Schema</span> <span class="o">|</span>           <span class="n">Name</span>           <span class="o">|</span>   <span class="n">Type</span>   <span class="o">|</span>  <span class="n">Owner</span>
<span class="o">--------+--------------------------+----------+----------</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">geography_columns</span>        <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">geometry_columns</span>         <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_nodes</span>                <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_nodes_node_id_seq</span>    <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_relations</span>            <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_way_classes</span>          <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_way_tags</span>             <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_way_types</span>            <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">raster_columns</span>           <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">raster_overviews</span>         <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">relations_ways</span>           <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">spatial_ref_sys</span>          <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways</span>                     <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_gid_seq</span>             <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_vertices_pgr</span>        <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_vertices_pgr_id_seq</span> <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
<span class="p">(</span><span class="mi">16</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Führe die “Dijkstra-Shortest-Path” Funktion aus, die von ungeleiteter Reise ausgeht:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
        <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
                <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span>
                        <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">false</span>
        <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>         <span class="n">cost</span>
<span class="o">-----+------+-------+-----------------------</span>
   <span class="mi">1</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span>  <span class="mf">0.000106201177015572</span>
   <span class="mi">2</span> <span class="o">|</span> <span class="mi">3603</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span>  <span class="mf">0.000171096610136435</span>
   <span class="mi">3</span> <span class="o">|</span> <span class="mi">8284</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span>  <span class="mf">0.000101401380664492</span>
 <span class="o">...</span> <span class="o">|</span>  <span class="o">...</span> <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                 <span class="o">...</span>
  <span class="mi">37</span> <span class="o">|</span> <span class="mi">3461</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span>   <span class="mf">0.00121559903339768</span>
  <span class="mi">38</span> <span class="o">|</span> <span class="mi">1761</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span>   <span class="mf">0.00307553090376563</span>
  <span class="mi">39</span> <span class="o">|</span> <span class="mi">5981</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span>  <span class="mf">0.000158813884783759</span>
  <span class="mi">40</span> <span class="o">|</span>  <span class="mi">600</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                     <span class="mi">0</span>
<span class="p">(</span><span class="mi">40</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>pgr_dijkstra unterstützt außerdem bigints für Knoten und Kanten, u
nd osm2pgrouting lädt die osm_ids ebenfalls,
so dass Sie alternativ die osm_id anstatt der automatisch generierten source- und target-Werte für Knoten nutzen können. Um die betreffenden osm_ids für unsere Knoten zu laden, wird die folgende Abfrage verwendet:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">osm_id</span>
        <span class="n">FROM</span> <span class="n">ways_vertices_pgr</span> <span class="n">where</span> <span class="nb">id</span> <span class="n">IN</span><span class="p">(</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
</pre></div>
</div>
<p>Mit der Ausgabe:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="nb">id</span>  <span class="o">|</span>   <span class="n">osm_id</span>
<span class="o">-----+------------</span>
 <span class="mi">100</span> <span class="o">|</span> <span class="mi">1896068597</span>
 <span class="mi">600</span> <span class="o">|</span>   <span class="mi">31369798</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>Um die osm_id zu verwenden, kann die Abfrage wie folgt angepasst werden:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
        <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source_osm</span> <span class="n">AS</span> <span class="n">source</span><span class="p">,</span> <span class="n">target_osm</span> <span class="n">AS</span> <span class="n">target</span><span class="p">,</span>
                <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
        <span class="mi">1896068597</span><span class="p">,</span> <span class="mi">31369798</span><span class="p">,</span> <span class="n">false</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Hinweis: das SQL Statement muss
immer über die Feldnamen <cite>id, source, target und cost</cite> verfügen.
Da wir die Felder <cite>source_osm</cite> und <cite>target_osm</cite> verwenden,
müssen diese mit einem ALIAS versehen werden, damit die
resultierenden pgr_dijkstra Abfragespalten wieder source und target heißen.</p>
<p>Die Abfrage ergibt folgende Ausgabe:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span>    <span class="n">node</span>    <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>         <span class="n">cost</span>
<span class="o">-----+------------+-------+-----------------------</span>
   <span class="mi">1</span> <span class="o">|</span> <span class="mi">1896068597</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span>  <span class="mf">0.000106201177015572</span>
   <span class="mi">2</span> <span class="o">|</span>  <span class="mi">471372588</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span>  <span class="mf">0.000171096610136435</span>
   <span class="mi">3</span> <span class="o">|</span>  <span class="mi">471372583</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span>  <span class="mf">0.000101401380664492</span>
   <span class="p">:</span>
   <span class="p">:</span>
  <span class="o">...|</span>  <span class="o">...</span>       <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                 <span class="o">...</span>
  <span class="mi">37</span> <span class="o">|</span> <span class="mi">1370351630</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span>   <span class="mf">0.00121559903339768</span>
  <span class="mi">38</span> <span class="o">|</span>   <span class="mi">30812815</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span>   <span class="mf">0.00307553090376563</span>
  <span class="mi">39</span> <span class="o">|</span> <span class="mi">3214028631</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span>  <span class="mf">0.000158813884783759</span>
  <span class="mi">40</span> <span class="o">|</span>   <span class="mi">31369798</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                     <span class="mi">0</span>
<span class="p">(</span><span class="mi">40</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>Da wir weiterhin selbst generierte Kanten-IDs verwenden, sind die Kanten-IDs die selben, wie in der ursprünglichen Abfrage, aber die IDs der Kanten sind die OSM Kanten IDs.</p>
<p>Der Vorteil der Verwendung der osm_ids anstatt der selbstgenerierten IDs ist, dass das Ergebnis konsistent ist bei gleichen osm_ids.
Es wurden nicht alle pgRouting Funktionen umgestellt, so dass sie bigints verwenden können. Dies bedeutet, dass nicht alle pgRouting
Funktionen mit osm_ids verwendet werden können.</p>
<ul class="simple">
<li>Um die Geometrie der Route anzuzeigen, kann das Ergebnis der Abfrage mit der ursprünglichen Tabelle und somit den Straßengeometrien verknüpfen werden:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">rpad</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">the_geom</span><span class="p">::</span><span class="n">text</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="n">AS</span> <span class="s2">&quot;the_geom (truncated)&quot;</span>
        <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
                <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span>
                        <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">false</span>
        <span class="p">)</span> <span class="n">a</span> <span class="n">INNER</span> <span class="n">JOIN</span> <span class="n">ways</span> <span class="n">b</span> <span class="n">ON</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">gid</span><span class="p">)</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">seq</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>                     <span class="n">the_geom</span> <span class="p">(</span><span class="n">truncated</span><span class="p">)</span>
<span class="o">-----+-------+--------------------------------------------------------------</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span> <span class="mf">0102000020E61000000200000035</span><span class="n">BEE5A03A641C40BC98C1734A5E4940F4</span>
   <span class="mi">2</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span> <span class="mf">0102000020E610000002000000</span><span class="n">F4CE577F3A641C402B5CA0EE4D5E494058</span>
   <span class="mi">3</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span> <span class="mf">0102000020E61000000200000058</span><span class="n">BCA2A53C641C40C3503D88535E4940F5</span>
 <span class="o">...</span> <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                                                          <span class="o">...</span>
  <span class="mi">36</span> <span class="o">|</span>  <span class="mi">6538</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000002999</span><span class="n">F7938C6F1C409DD843FB585D49405C</span>
  <span class="mi">37</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000005</span><span class="n">CAE7E6C926F1C40E55C2FF2575D494088</span>
  <span class="mi">38</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000008849</span><span class="n">B89047701C406DF7BC2C375D4940E8</span>
  <span class="mi">39</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span> <span class="mf">0102000020E610000002000000</span><span class="n">E82E89B322721C40A85890C1E55C494059</span>
<span class="p">(</span><span class="mi">39</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<ul>
<li><dl class="first docutils">
<dt>You can view the routes using a graphical tool</dt>
<dd><p class="first last">such as <a class="reference internal" href="../overview/openjump_overview.html"><span class="doc">OpenJump</span></a> or
the <a class="reference internal" href="../overview/qgis_overview.html"><span class="doc">QGIS</span></a> DbManager extension.</p>
</dd>
</dl>
</li>
</ul>
<p>To use the DbManager extension of QGIS open up QGIS then go to Go to <code class="docutils literal"><span class="pre">Database</span> <span class="pre">-&gt;</span> <span class="pre">DB</span> <span class="pre">Manager</span> <span class="pre">-&gt;</span> <span class="pre">DB</span> <span class="pre">Manager</span></code>.
Select the SQL Window icon and cut and paste the above pgRouting Query.</p>
<ul class="simple">
<li>Run the Dijkstra shortest path function with considering direction.</li>
</ul>
<p>In the previous examples, we assumed streets have equal cost in both directions.
For cases where you have one ways or different speed limits on either lane,
cost going on one direction of a road, may be different than going the other way.
For these cases you need to add an additional column to your query <cite>reverse_cost</cite></p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
        <span class="k">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
<span class="s1">                SELECT gid as id, source, target,</span>
<span class="s1">                        cost_s As cost, reverse_cost_s AS reverse_cost FROM ways&#39;</span><span class="p">,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="k">true</span>
        <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Mit dem Kommando <strong class="command">\q</strong> verlässt man die PostgreSQL Shell wieder.</li>
</ul>
</div>
<div class="section" id="wie-geht-es-weiter">
<h2>Wie geht es weiter?<a class="headerlink" href="#wie-geht-es-weiter" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>pgRouting Webseite</strong> - Besuche die Projektseite unter <a class="reference external" href="http://www.pgrouting.org">http://www.pgrouting.org</a>, um mehr über pgRouting zu erfahren.</li>
<li><strong>pgRouting Dokumentation</strong> - Die aktuelle Dokumentation ist zu finden auf <a class="reference external" href="http://docs.pgrouting.org">http://docs.pgrouting.org</a></li>
<li><strong>pgRouting Workshop</strong> - The workshop <cite>&#8220;FOSS4G routing with pgRouting tools and OpenStreetMap road data&#8221;</cite> is available in: <a class="reference external" href="http://workshop.pgrouting.org">http://workshop.pgrouting.org</a></li>
<li><strong>osm2pgRouting loading data</strong> - <a class="reference external" href="https://github.com/pgRouting/osm2pgrouting/wiki/Documentation-for-osm2pgrouting-v2.1">https://github.com/pgRouting/osm2pgrouting/wiki/Documentation-for-osm2pgrouting-v2.1</a></li>
<li><strong>QGIS pgRouting Layer Plugin</strong> - <a class="reference external" href="https://plugins.qgis.org/plugins/pgRoutingLayer/">https://plugins.qgis.org/plugins/pgRoutingLayer/</a> provides GUI for pgRouting functions and interacts with map so you don&#8217;t have to write SQL.</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>